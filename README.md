# PT 自动认领小助手 by 7owel

![Python](https://img.shields.io/badge/Python-3.7+-blue.svg)
![Platform](https://img.shields.io/badge/Platform-Windows-lightgrey.svg)
![License](https://img.shields.io/badge/License-MIT-green.svg)

由于许多现有的自动认领的油猴脚本在PT站点兼容性不好，此项目是基于图像识别的自动化模拟点击工具。它旨在提供一个更通用、更可靠的方案来自动执行“认领”任务。

![PT 自动认领小助手 GUI](https://raw.githubusercontent.com/7owel/PT-Auto-Claim/main/docs/gui-screenshot.png)

---

## ✨ 核心特性

- **图像识别**: 基于`pyautogui`，精准定位并点击相关按钮，完成认领流程。
- **自动翻页**: 能够自动检测页面底部并点击“下一页”，实现对所有页面的全覆盖。
- **动态缩放适配**: **独创的自适应缩放机制**，能够自动检测用户Windows系统的显示缩放比例（如100%, 125%, 150%, 175%），并实时缩放截图模板，从而完美适配不同分辨率（1080p, 2K, 4K）和高DPI屏幕，无需为不同环境准备多套截图。
- **逻辑**: 先HOME回到页面顶端，Pagedown滚动屏幕，直到找到认领按钮，按下认领按钮，点击OK，检测是否还有OK，没有代表领取成功，有就再点一次，证明人数上限了。
- **图形用户界面 (GUI)**:
    - 基于`tkinter`构建，界面简洁，操作直观。
    - 实时日志输出，任务进度一目了然。
    - 提供“开始”、“暂停/继续”、“停止”控制功能。
- **全局快捷键**:
    - **F6**: 快速暂停或继续任务。
    - **F7**: 快速停止任务。

## 🚀 如何使用

1.  **下载**: 前往 [Releases](https://github.com/7owel/PT-Auto-Claim/releases) 页面，下载最新的`.exe`可执行文件。
2.  **运行前设置**:
    - 打开你的PT站点，并登录。
    - 导航到你的**个人资料页面** (Profile)。
    - 找到并**展开“正在做种” (Seeding)** 的列表，确保列表内容在屏幕上可见。
    - **重要**: 确保你的浏览器缩放比例为 **100%** (可通过 `Ctrl + 0` 快速重置)。
3.  **开始任务**:
    - 双击运行 `PT自动认领小助手.exe`。
    - 阅读GUI窗口上的指引。
    - 点击 **▶ 开始** 按钮，脚本将有5秒倒计时，请在此期间切换到你的浏览器窗口。
    - 然后不需要操作鼠标，静静的看着他运行！

## ⚠️ 已知问题与局行性 (Known Issues & Limitations)

本软件在 `v1.0.0-BETA` 版本中已通过广泛测试，但在某些极端环境下仍可能遇到以下问题。这些将是未来版本优化的重点方向。

1.  **低分辨率下的识别率**:
    - 本软件已在1080p及以上分辨率、不同缩放比例下进行过良好测试。但在极低分辨率（如720p或更低）下，由于图像像素过少，可能会出现识别错误。

2.  **站点自定义字体**:
    - 对于 `end_markers`（页面结束标志）的识别依赖于特征丰富的文字截图。部分PT站点可能使用独特的自定义字体，这可能导致在不同环境下字体渲染差异过大，从而识别失败。
    - **建议**: 如果遇到此问题，请尝试截取站点Logo或其他非文字类的、位于页面底部的独特图标作为`end_marker`。

3.  **深色/夜间模式下的识别**:
    - 脚本默认启用了灰度识别 (`USE_GRAYSCALE = True`) 以提高效率和兼容性。但在某些“下一页”按钮与背景对比度极低的深色主题或夜间模式下，可能会识别失败。

4.  **UI动画时序问题**:
    - 脚本中的 `ANIMATION_WAIT` 参数（当前为0.8秒）是为了平衡UI动画响应与执行效率。在系统负载极高或浏览器响应迟缓的情况下，这个延迟可能不够长，从而导致“抢跑”或“双击”等问题。
    - **建议**: 如果频繁遇到此类问题，可以尝试在源代码中适当增加 `ANIMATION_WAIT` 的值（如`0.9`或`1.2`）。

5.  **截图模板覆盖范围有限**:
    - 由于我个人接触的PT站点有限，目前`images`文件夹内主要只包含了适配简体中文和繁体中文站点的常见按钮截图。
    - **期待贡献！** 如果您在其他站点（如英文站、日文站或其他UI风格的站点）上使用时遇到识别问题，非常欢迎您按照本项目截图标准（高分屏+高缩放），截取对应按钮的图片，并通过[创建新的Issue](https://github.com/7owel/PT-Auto-Claim/issues)将截图样本提供给我。

## 📄 许可 (License)

本项目采用 [MIT License](LICENSE) 开源。
